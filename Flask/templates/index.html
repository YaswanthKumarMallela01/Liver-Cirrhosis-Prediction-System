<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Liver Cirrhosis Prediction</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <header class="header">
        <div class="header-content">
            <div class="header-title">
                <h1 class="main-title">Yaswanth's Liver Care Hub</h1>
                <p class="subtitle">AI-Powered Liver Cirrhosis Prediction System</p>
            </div>
            <div class="datetime-display">
                <div class="time" id="currentTime"></div>
                <div class="date" id="currentDate"></div>
                <div class="day" id="currentDay"></div>
            </div>
        </div>
    </header>
    <div class="container">
        {% if prediction_text %}
            <div class="result{% if is_error %} error-message{% endif %}">
                <h2>Prediction Result:</h2>
                <p>{{ prediction_text }}</p>
                <p><strong>Confidence:</strong> {{ confidence }}</p>
                <p><strong>Health Tip:</strong> {{ health_tip }}</p>
            </div>
        {% endif %}
        <h2 class="section-title">Liver Cirrhosis Predictor</h2>
        <button type="button" id="generateTestCases" style="background-color: #28a745; color: white; padding: 15px; border: none; border-radius: 8px; font-size: 1.1em; font-weight: 600; cursor: pointer; transition: background-color 0.3s ease, transform 0.2s ease; margin-bottom: 20px; width: 100%;">Generate Test cases</button>
        <form action="/predict" method="post">
            {% set placeholders = {
                "Age": "Enter age in years (e.g., 45)",
                "Gender": "Enter 1 for Male, 0 for Female",
                "Duration of alcohol consumption(years)": "Years of alcohol consumption (e.g., 15)",
                "Quantity of alcohol consumption (quarters/day)": "Quarters per day (e.g., 2.5)",
                "Hepatitis B infection": "Enter 1 for Yes, 0 for No",
                "Hepatitis C infection": "Enter 1 for Yes, 0 for No",
                "Diabetes Result": "Enter 1 for Yes, 0 for No",
                "Obesity": "Enter 1 for Yes, 0 for No",
                "Family history of cirrhosis/ hereditary": "Enter 1 for Yes, 0 for No",
                "Platelet Count  (lakhs/mm)": "Normal range: 1.5-3.5 (e.g., 2.5)",
                "Total Bilirubin    (mg/dl)": "Normal: 0.2-1.4 mg/dl (e.g., 0.8)",
                "Direct    (mg/dl)": "Normal: 0.1-0.4 mg/dl (e.g., 0.2)",
                "Total Protein     (g/dl)": "Normal: 6.0-8.0 g/dl (e.g., 7.2)",
                "Albumin   (g/dl)": "Normal: 3.5-5.0 g/dl (e.g., 4.5)",
                "A/G Ratio": "Normal: 1.0-1.8 (e.g., 1.4)",
                "AL.Phosphatase      (U/L)": "Normal: 40-100 U/L (e.g., 85)",
                "SGOT/AST      (U/L)": "Normal: 10-40 U/L (e.g., 28)",
                "SGPT/ALT (U/L)": "Normal: 10-40 U/L (e.g., 32)",
                "USG Abdomen (diffuse liver or  not)": "Enter 1 for Diffuse liver, 0 for Normal"
            } %}
            {% for feature in [
                "Age",
                "Gender",
                "Duration of alcohol consumption(years)",
                "Quantity of alcohol consumption (quarters/day)",
                "Hepatitis B infection",
                "Hepatitis C infection",
                "Diabetes Result",
                "Obesity",
                "Family history of cirrhosis/ hereditary",
                "Platelet Count  (lakhs/mm)",
                "Total Bilirubin    (mg/dl)",
                "Direct    (mg/dl)",
                "Total Protein     (g/dl)",
                "Albumin   (g/dl)",
                "A/G Ratio",
                "AL.Phosphatase      (U/L)",
                "SGOT/AST      (U/L)",
                "SGPT/ALT (U/L)",
                "USG Abdomen (diffuse liver or  not)"
            ] %}
                <div class="form-group">
                    <label for="{{ feature }}">{{ feature }}</label>
                    <input type="text" name="{{ feature }}" id="{{ feature }}" placeholder="{{ placeholders[feature] }}" required>
                </div>
            {% endfor %}
            <button type="submit">Predict</button>
        </form>
    </div>
    <footer class="footer">
        <div class="footer-content">
            <div class="footer-links">
                <a href="https://github.com/YaswanthKumarMallela01" target="_blank" class="social-link github">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    GitHub Profile
                </a>
                <a href="https://www.linkedin.com/in/yaswanthkumar1/" target="_blank" class="social-link linkedin">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg>
                    LinkedIn
                </a>
                <a href="https://github.com/YaswanthKumarMallela01/Liver-Cirrhosis-Prediction-System" target="_blank" class="social-link repo">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/></svg>
                    Repository
                </a>
            </div>
        </div>
    </footer>
    <script>
        // Real-time clock and date display
        function updateDateTime() {
            const now = new Date();
            const days = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];
            const months = ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'];
            
            const hours = String(now.getHours()).padStart(2, '0');
            const minutes = String(now.getMinutes()).padStart(2, '0');
            const seconds = String(now.getSeconds()).padStart(2, '0');
            const timeString = `${hours}:${minutes}:${seconds}`;
            
            const day = days[now.getDay()];
            const date = `${months[now.getMonth()]} ${now.getDate()}, ${now.getFullYear()}`;
            
            document.getElementById('currentTime').textContent = timeString;
            document.getElementById('currentDate').textContent = date;
            document.getElementById('currentDay').textContent = day;
        }
        
        updateDateTime();
        setInterval(updateDateTime, 1000);
        
    </script>
    <script>
        // Add hover effect for generate button
        document.getElementById('generateTestCases').addEventListener('mouseenter', function() {
            this.style.backgroundColor = '#218838';
            this.style.transform = 'translateY(-2px)';
        });
        document.getElementById('generateTestCases').addEventListener('mouseleave', function() {
            this.style.backgroundColor = '#28a745';
            this.style.transform = 'translateY(0)';
        });
        
        document.getElementById('generateTestCases').addEventListener('click', function() {
            // Randomly choose positive (1) or negative (0) case
            const isPositive = Math.random() < 0.5;
            
            // Generate test data based on case type
            let testData = {};
            
            if (isPositive) {
                // Positive case (cirrhosis) - values indicating liver problems
                testData = {
                    "Age": Math.floor(Math.random() * 40) + 40, // 40-80
                    "Gender": Math.random() < 0.6 ? 1 : 0, // More likely male
                    "Duration of alcohol consumption(years)": Math.floor(Math.random() * 25) + 10, // 10-35 years
                    "Quantity of alcohol consumption (quarters/day)": (Math.random() * 3 + 1).toFixed(2), // 1-4 quarters
                    "Hepatitis B infection": Math.random() < 0.4 ? 1 : 0,
                    "Hepatitis C infection": Math.random() < 0.5 ? 1 : 0,
                    "Diabetes Result": Math.random() < 0.4 ? 1 : 0,
                    "Obesity": Math.random() < 0.3 ? 1 : 0,
                    "Family history of cirrhosis/ hereditary": Math.random() < 0.3 ? 1 : 0,
                    "Platelet Count  (lakhs/mm)": (Math.random() * 1.5 + 0.5).toFixed(2), // Lower platelets (0.5-2.0)
                    "Total Bilirubin    (mg/dl)": (Math.random() * 3 + 1.5).toFixed(2), // Elevated (1.5-4.5)
                    "Direct    (mg/dl)": (Math.random() * 2 + 0.5).toFixed(2), // Elevated (0.5-2.5)
                    "Total Protein     (g/dl)": (Math.random() * 1.5 + 5.5).toFixed(2), // Lower (5.5-7.0)
                    "Albumin   (g/dl)": (Math.random() * 1.5 + 2.5).toFixed(2), // Lower albumin (2.5-4.0)
                    "A/G Ratio": (Math.random() * 0.5 + 0.8).toFixed(2), // Lower ratio (0.8-1.3)
                    "AL.Phosphatase      (U/L)": Math.floor(Math.random() * 200 + 150), // Elevated (150-350)
                    "SGOT/AST      (U/L)": Math.floor(Math.random() * 150 + 80), // Elevated (80-230)
                    "SGPT/ALT (U/L)": Math.floor(Math.random() * 120 + 70), // Elevated (70-190)
                    "USG Abdomen (diffuse liver or  not)": Math.random() < 0.7 ? 1 : 0 // More likely diffuse liver
                };
            } else {
                // Negative case (no cirrhosis) - normal/healthy values
                testData = {
                    "Age": Math.floor(Math.random() * 50) + 20, // 20-70
                    "Gender": Math.random() < 0.5 ? 1 : 0,
                    "Duration of alcohol consumption(years)": Math.floor(Math.random() * 10), // 0-10 years
                    "Quantity of alcohol consumption (quarters/day)": (Math.random() * 1).toFixed(2), // 0-1 quarters
                    "Hepatitis B infection": Math.random() < 0.1 ? 1 : 0, // Less likely
                    "Hepatitis C infection": Math.random() < 0.1 ? 1 : 0, // Less likely
                    "Diabetes Result": Math.random() < 0.15 ? 1 : 0,
                    "Obesity": Math.random() < 0.2 ? 1 : 0,
                    "Family history of cirrhosis/ hereditary": Math.random() < 0.1 ? 1 : 0, // Less likely
                    "Platelet Count  (lakhs/mm)": (Math.random() * 2 + 1.5).toFixed(2), // Normal (1.5-3.5)
                    "Total Bilirubin    (mg/dl)": (Math.random() * 1.2 + 0.2).toFixed(2), // Normal (0.2-1.4)
                    "Direct    (mg/dl)": (Math.random() * 0.3 + 0.1).toFixed(2), // Normal (0.1-0.4)
                    "Total Protein     (g/dl)": (Math.random() * 2 + 6.0).toFixed(2), // Normal (6.0-8.0)
                    "Albumin   (g/dl)": (Math.random() * 1.5 + 3.5).toFixed(2), // Normal (3.5-5.0)
                    "A/G Ratio": (Math.random() * 0.8 + 1.0).toFixed(2), // Normal (1.0-1.8)
                    "AL.Phosphatase      (U/L)": Math.floor(Math.random() * 60 + 40), // Normal (40-100)
                    "SGOT/AST      (U/L)": Math.floor(Math.random() * 30 + 10), // Normal (10-40)
                    "SGPT/ALT (U/L)": Math.floor(Math.random() * 30 + 10), // Normal (10-40)
                    "USG Abdomen (diffuse liver or  not)": Math.random() < 0.1 ? 1 : 0 // Less likely diffuse liver
                };
            }
            
            // Fill all input fields
            for (const [feature, value] of Object.entries(testData)) {
                const input = document.getElementById(feature);
                if (input) {
                    input.value = value;
                }
            }
        });
    </script>
</body>
</html>
